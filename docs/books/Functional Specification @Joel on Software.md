# Functional Specification @Joel on Software

## Source

- 「Joel on Software」- joel Spolsky （著）／青木靖（訳）

## Part 1 Why Bother ?

**仕様書の最も重要な役割がプログラムをデザインすることだから。**

プログラムをどう機能するか詳細に記述することによって、プログラムを実際にデザインすることを強いられる。
仕様書を書かなければ「常に」より多くの時間を費やし、より品質の低いコードを作ることになる。

**コミュニケーションにかかる時間を節約するため。**

プログラムがどう動くかと想定しているか「一度だけ」説明すれば良いため。

- 品質保証の人はプログラムがどう動くと想定されているか知るために仕様書を読み、何をテストすればよいのかを理解する。
- マーケティングの人たちは、Webに載せるための、まだ作られていないペーパーウェア製品のホワイトペーパーを書くときに仕様書を使う。
- 開発者はどういうコードを書くべきか知るために仕様書を読む。
- 顧客は開発者の作っているものが自分たちの干しい商品であることを確認するために仕様書を読む。
- テクニカルライターは仕様書を読んで素敵なマニュアルを作る。
- マネージャーは経営会議で何が起こっているのかについて知っているような顔をするために仕様書を読む。

## Part 2 What a Spec ?

### 「仕様書（Spec）」の定義

ここで議論しているのは機能仕様であって、技術仕様ではない。人々はこの２つを混同している。

#### 機能仕様書

- ユーザー観点から製品がどのように動くかを記述する。
- プログラムがどのように実装されるかは問題ににしない。
- ここで議論するのは機能であり、画面とか、メニューとか、ダイアログとかいったものの仕様を定める。

#### 技術仕様書

- プログラムの内部の実装について記述する。
- データ構造、リレーションデータベースモデル、プログラミング言語や開発ツールの選択、アルゴリズムといったものである。

### 機能仕様書に記載すること

- <https://www.joelonsoftware.com/whattimeisit/>

#### 注意書き

純粋に自己防衛のため。「この仕様書は未完成である」みたいな一文を入れておけば、人々があなたの頭を噛み切ろうと押しかけてくることはなくなるだろう。
時がたって仕様書が完成に近づいたら、これを「私が分かる限りではこの仕様書は完成しているが、何か抜けがあれば知らせてほしい」と書き換えれば良い。

#### 作成者

仕様書はチームで書かれるべきだと考えている企業もあるようだが、仕様書は１人の人間によって書かれ、所有されるべきだ。製品の規模が大きい場合には、それを分割し、それぞれの部分を別の人に割り当て、それぞれ個別に仕様を書かせれば良い。人々は自分が作った仕様について責任と所有権を持つべきた。その仕様書でなにかまずいことがあれば、仕様書に名前のあるその仕様書の所有者に、それを修正する責任がある。

#### シナリオ

製品をデザインするときは、人々がその製品をどのように使うかについて、現実的で生き生きとしたシナリオが頭の中に入っている必要がある。製品のターゲット層から、製品がまったく典型的な仕方で使うような、まったく想像上のまったく類型的なユーザーをイメージして記載する。

#### 対象外

すべての機能を実現しようとすると、それは際限ない時間が必要で、コストがかかりすぎるだろう。仕様書の「対象外」セクションを使い。やらないことを伝える。

たとえば、「テレパシーによるユーザーインタフェースは持たない。」はあんまりだが、「このリリースではパフォーマンスについては気に掛けない。製品は機能するが遅いかもしれない。バージョン２の開発時に時間があれば、遅い部分を最適化するだろう。」とか「できる限り早い時期にオープンする（Not goona do it !）など。

#### 概要

仕様書の目次のようなもの、簡単なフローチャートかもしれないし、詳細なアーキテクチャに関する議論かもしれない。みんなこれを読んでビックピクチャーを把握する。

#### 詳細、詳細、詳細

そうして詳細に入っていく。多くの人は具体的な詳細を知る必要が生じるまではざっと目を通すだけだ。

詳細は、機能仕様書で最も重要な部分だ。ログインページのすべてのエラーケースについて言及するぐらい、とても詳細に立ち入って記述する。これらのケースはすべて、書かなければならないコードに対応する。さらに重要なのは、これらのケースが、誰かが下さなければならない決定に対応しているということだ。誰かがパスワード忘れに対するポリシーを決めなければならない。決めなければコードは書けないのだ。

#### 未解決の問題

仕様書の最初のバージョンで未解決の問題があるのは構わない。必要なら代替案について議論する。プログラマが作業に取りかかるまでには、これらすべて片付いていなければならない。どんなものであれ、些細でない問題の解決の仕方いかんによって、コードをどう書くべきかは変わってくる。

#### ノート

実装上の技術的詳細について述べたプログラマ向けのメッセージを「テクニカルノート」として記す。

#### 仕様書は生きている必要がある

製品が開発され、新しい決定がなされている間、仕様書はアップデートされ続ける必要がある。仕様書は、コードコンプリートしたときに初めて凍結される。
毎日仕様書を再リリースしたりはしない。通常は、アップデートした仕様書をサーバーのどこか、チームが参照できるところに置いておく。みんなが全体を読み直さなくて住むようにリビジョンマークをつけておく。どこが変わったのかはリビジョンマークに目を通すだけで済む。

## Part 3 But ... How ?

### 誰が仕様書を書くのか？

遅れているプロジェクトでプログラマを増員すると、プロジェクトは余計に遅れる。その理由は、チームにｎ人プログラマがいるとき、コミュニケーションパスの数は n(n - 1) /2 になるが、これはО(n^2)で増加するためだ。

Microsoft では「プログラムマネージャ」という概念を取り入れた。プログラムマネージャは製品のデザインと仕様を所有する。要求を集め、コードが何をすべきか見極め、そして仕様書を書いている。通常、プログラムマネージャ１人に対してプログラマが５人いて、このプログラマたちにはプログラムマネージャが仕様書の形で表現したことをコードに実装する責任がある。プログラムマネージャはまた、マーケティング、ドキュメンテーション、テスト、国際化、その他プログラマが時間を費やすべきでないあらゆる煩わしい詳細に関して整理を行う必要がある。

### どうやってプログラムマネージャを雇うか？

避けるべきことが３つある。

1. コーダーをプログラムマネージャに昇進させないこと  
良いプログラムマネージャになるためのスキル（明快な文章を書けること、外交手腕、マーケットに対する意識、ユーザに対する理解、良いUIデザインの能力）が良いコーダであるためのスキルでもあることは滅多に無い。

2. マーケティングの人間をプログラムマネージャにしないこと  
マーケティングにおいて優秀な人間が、製品をデザインできるほど技術的な問題をよく把握していることは滅多に無い。

3. コーダをプログラムマネージャの監視下に置かないこと  
プログラムマネージャが階層の最上位にいたばあい、うぬぼれや近視眼のため、自分のやりかたでやるように「命令」するかもしれないが、それは「上司にとやかく言うのはまずい」とチーム内での意見がなくなり、より良い製品にならない。
プログラムマネージャが誰かに何かをしてもらいたいと思ったら、それをやるのが正しいということを納得させる必要がある。

## Part 4 Tips

### ルール１：可笑しくすること

読むのを楽しくすること。可笑しくするための最も簡単な方法は、必要も無いのに話を具体的にすることだ。

### ルール２：仕様書を書くのは頭が実行するコードを書くようなもの

「正しい」仕様書というのは「テクニカルに」正しくなければならないと考え学術論文みたいな仕様書を書こうとする。

それが誤りであるのは、仕様書を書くとき、それは正しいだけでなく、理解可能な必要があるからだ。

仕様書を書くときには、あなたがそれを説明している相手を想像し、各ステップであなたが彼らに理解してもらおうと思っているものを想像してみることだ。一文ごとに、その文を読んでいる人が、すでに説明したことに基づいて深く理解できるか自問してみること。のっけから膨大な技術用語を見て読むのを諦めてしまわないようにすること。

### ルール３：できる限りわかりやすく

フォーマルな書き方をしないで、できる限り簡単な言葉を使うこと。

短い文に分割すること。ある文を明確に書くのが難しいと感じられるなら、２つか３つの文に分割してみる。

ページが文字だけで埋められていて、文字の壁のようになるのを避けること。雑誌では、記事の本文あらの引用をページの真ん中に大きなフォントで印刷することまでして、文字だらけのページに見えるのを避けている。箇条書き、挿絵、チャート、表、それにたくさんの空白を使い、読むのがふわふらした感じになるようにすること。

### ルール４：何度も見返し、読み直す

何度も見直し、読み返す。もし超簡単じゃない文書を見つけたら、それを書き直す。

### ルール５：テンプレートは有害である

「すべての仕様書が同じ様に見える」ことに何の意味があるのか、本棚の本がみんな同じ様にみえるだろうか？

テンプレートで起こりがちなのは、それぞれの機能で重要そうに見えることのためにたくさんのセクションをテンプレートに追加するということだ。

誰が仕様書に「参考文献リスト」を必要とするのか？あるいは「用語集」を？

仕様書は、あなたが人々に読んでもらいたいと思うドキュメントだ。その意味では、The New Yorker誌のエッセイや大学の論文と同じだ、論文を書くためのテンプレートを学生に配る教授の話を聞いたことがあるだろうか？１つのテンプレートに沿って書かれた２つの良いエッセイなんて読んだことがあるだろうか？そんな考えは捨てることだ。
